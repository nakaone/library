<!DOCTYPE html><html xml:lang="ja" lang="ja"><head>
<title>pivot</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!-- CDN -->
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.13.2/jquery-ui.min.js" integrity="sha512-57oZ/vW8ANMjR/KQ6Be9v/+/h6bq9/l3f0Oc7vn6qMqyhvPd1cvKBRWWpzu0QoneImqr2SkmO4MSqU+RpHom3Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/pivottable/2.23.0/pivot.min.js" integrity="sha512-XgJh9jgd6gAHu9PcRBBAp0Hda8Tg87zi09Q2639t0tQpFFQhGpeCgaiEFji36Ozijjx9agZxB0w53edOFGCQ0g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/alasql/4.1.10/alasql.min.js" integrity="sha512-Igz7esT29XvklQE5s9lKkzY/xN5OmbsWYzXml2AE7hEYyAxxIgbQ0NXvyqt4S9VrWHA0lRUKkhLgc62QO3vkoQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<!-- 独自ライブラリ -->
<script type="text/javascript" src="../../BasePage/1.1.0/core.js"></script>
<script type="text/javascript" src="../../DateEx/1.1.0/core.js"></script>
<script type="text/javascript" src="core.js"></script>
<!-- O/Lやlibrary配下は漏洩の危険があるため、ローカルから取得 -->
<script type="text/javascript" src="../../../../tmp/kzData.js"></script>
<style type="text/css"></style>
<link rel="stylesheet" href="pivot.css" />
</head><body>
  <div id="output"></div>

<script type="text/javascript">
var sampleData = [
  {'date':'2014-01-16','id':'1','kind':'food','price':'150','sales_num':'1','total_sales':'150','name':'ドーナツ'},
  {'date':'2014-01-16','id':'2','kind':'drink','price':'300','sales_num':'4','total_sales':'1200','name':'コーヒー'},
  {'date':'2014-01-16','id':'3','kind':'drink','price':'120','sales_num':'2','total_sales':'240','name':'コーラ'},
  {'date':'2014-01-16','id':'5','kind':'dessert','price':'260','sales_num':'3','total_sales':'780','name':'アイス'},
  {'date':'2014-01-16','id':'1','kind':'food','price':'150','sales_num':'5','total_sales':'750','name':'ドーナツ'},
  {'date':'2014-01-16','id':'2','kind':'drink','price':'300','sales_num':'1','total_sales':'300','name':'コーヒー'},
  {'date':'2014-01-16','id':'4','kind':'food','price':'400','sales_num':'2','total_sales':'800','name':'サンド的な'},
  {'date':'2014-01-16','id':'2','kind':'drink','price':'300','sales_num':'2','total_sales':'600','name':'コーヒー'},
  {'date':'2014-01-16','id':'4','kind':'food','price':'400','sales_num':'5','total_sales':'2000','name':'サンド的な'},
  {'date':'2014-01-16','id':'5','kind':'dessert','price':'260','sales_num':'2','total_sales':'520','name':'アイス'},
  {'date':'2014-01-17','id':'2','kind':'drink','price':'300','sales_num':'4','total_sales':'1200','name':'コーヒー'},
  {'date':'2014-01-17','id':'2','kind':'drink','price':'300','sales_num':'3','total_sales':'900','name':'コーヒー'},
  {'date':'2014-01-17','id':'1','kind':'food','price':'150','sales_num':'2','total_sales':'300','name':'ドーナツ'},
  {'date':'2014-01-17','id':'2','kind':'drink','price':'300','sales_num':'4','total_sales':'1200','name':'コーヒー'},
  {'date':'2014-01-17','id':'4','kind':'food','price':'400','sales_num':'2','total_sales':'800','name':'サンド的な'},
  {'date':'2014-01-17','id':'2','kind':'drink','price':'300','sales_num':'2','total_sales':'600','name':'コーヒー'},
  {'date':'2014-01-17','id':'3','kind':'drink','price':'120','sales_num':'4','total_sales':'480','name':'コーラ'},
  {'date':'2014-01-17','id':'4','kind':'food','price':'400','sales_num':'1','total_sales':'400','name':'サンド的な'},
  {'date':'2014-01-17','id':'4','kind':'food','price':'400','sales_num':'2','total_sales':'800','name':'サンド的な'},
  {'date':'2014-01-17','id':'4','kind':'food','price':'400','sales_num':'1','total_sales':'400','name':'サンド的な'},
  {'date':'2014-01-17','id':'6','kind':'dessert','price':'800','sales_num':'3','total_sales':'2400','name':'高いアイス'},
  {'date':'2014-01-17','id':'5','kind':'dessert','price':'260','sales_num':'2','total_sales':'520','name':'アイス'},

];

window.addEventListener('DOMContentLoaded',() => {
  const v = {whois:'DOMContentLoaded',rv:null,step:0};
  console.log(v.whois+' start.');
  try {

    //v.kz = new KawaZanyo(rawjson,{parent:'body'});
    $("#output").pivotUI(sampleData,{
      rows: ["date"],
      cols: ["id", "name"],
      vals: ['total_sales'],
      //aggregatorName: 'intSum',
      //rendererName: 'table'
    },false);
    /* OK
    $("#output").pivot(
            [
                {color: "blue", shape: "circle"},
                {color: "red", shape: "triangle"}
            ],
            {
                rows: ["color"],
                cols: ["shape"]
            }
        );
    */

    v.step = 99; // 終了処理
    console.log(v.whois+' normal end.');
    return v.rv;

  } catch(e){
    console.error(v.whois+' abnormal end(step.'+v.step+').\n',e,v);
  }
});
</script></body></html>